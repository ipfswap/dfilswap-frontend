{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function _templateObject12(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-between;\\n  box-sizing: border-box;\\n  border-radius: 8px;\\n  background: #fffdfa;\\n  color: #aa9584;\\n  width: 100%;\\n  margin-top: 12px;\\n  line-height: 32px;\\n  font-size: 13px;\\n  border: 1px solid #e6dcd5;\\n  text-align: center;\\n  padding: 0 12px;\\n\"]);_templateObject12=function _templateObject12(){return data;};return data;}function _templateObject11(){var data=_taggedTemplateLiteral([\"\\n  color: \",\";\\n\"]);_templateObject11=function _templateObject11(){return data;};return data;}function _templateObject10(){var data=_taggedTemplateLiteral([\"\\n  margin-top: \",\"px;\\n  text-align: center;\\n\"]);_templateObject10=function _templateObject10(){return data;};return data;}function _templateObject9(){var data=_taggedTemplateLiteral([\"\\n  height: \",\"px;\\n  width: \",\"px;\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  flex-direction: column;\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  font-size: 24px;\\n  font-weight: 700;\\n  margin: \",\"px 0 0;\\n  padding: 0;\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  width: calc((900px - \",\"px * 2) / 3);\\n  position: relative;\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  margin-bottom: \",\"px;\\n  flex-flow: row wrap;\\n  @media (max-width: 768px) {\\n    width: 100%;\\n    flex-flow: column nowrap;\\n    align-items: center;\\n  }\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  flex: 1;\\n  justify-content: center;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  width: 900px;\\n  @media (max-width: 768px) {\\n    width: 100%;\\n  }\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  background: linear-gradient(\\n    45deg,\\n    rgba(255, 0, 0, 1) 0%,\\n    rgba(255, 154, 0, 1) 10%,\\n    rgba(208, 222, 33, 1) 20%,\\n    rgba(79, 220, 74, 1) 30%,\\n    rgba(63, 218, 216, 1) 40%,\\n    rgba(47, 201, 226, 1) 50%,\\n    rgba(28, 127, 238, 1) 60%,\\n    rgba(95, 21, 242, 1) 70%,\\n    rgba(186, 12, 248, 1) 80%,\\n    rgba(251, 7, 217, 1) 90%,\\n    rgba(255, 0, 0, 1) 100%\\n  );\\n  background-size: 300% 300%;\\n  animation: \",\" 2s linear infinite;\\n  border-radius: 12px;\\n  filter: blur(6px);\\n  position: absolute;\\n  top: -2px;\\n  right: -2px;\\n  bottom: -2px;\\n  left: -2px;\\n  z-index: -1;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  \\n\\t0% {\\n\\t\\tbackground-position: 0% 50%;\\n\\t}\\n\\t50% {\\n\\t\\tbackground-position: 100% 50%;\\n\\t}\\n\\t100% {\\n\\t\\tbackground-position: 0% 50%;\\n\\t}\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import BigNumber from'bignumber.js';import React,{useEffect,useState}from'react';import Countdown from'react-countdown';import styled,{keyframes}from'styled-components';import{useWallet}from'use-wallet';import Button from'../../../components/Button';import Card from'../../../components/Card';import CardContent from'../../../components/CardContent';import CardIcon from'../../../components/CardIcon';import Loader from'../../../components/Loader';import Spacer from'../../../components/Spacer';import useAllStakedValue from'../../../hooks/useAllStakedValue';import useFarms from'../../../hooks/useFarms';import useSushi from'../../../hooks/useSushi';import{getEarned,getMasterChefContract}from'../../../sushi/utils';import{bnToDec}from'../../../utils';var FarmCards=function FarmCards(){var _useFarms=useFarms(),_useFarms2=_slicedToArray(_useFarms,1),farms=_useFarms2[0];var _useWallet=useWallet(),account=_useWallet.account;var stakedValue=useAllStakedValue();var sushiIndex=farms.findIndex(function(_ref){var tokenSymbol=_ref.tokenSymbol;return tokenSymbol==='SUSHI';});var sushiPrice=sushiIndex>=0&&stakedValue[sushiIndex]?stakedValue[sushiIndex].tokenPriceInWeth:new BigNumber(0);var BLOCKS_PER_YEAR=new BigNumber(2336000);var SUSHI_PER_BLOCK=new BigNumber(1000);var rows=farms.reduce(function(farmRows,farm,i){var farmWithStakedValue=_objectSpread({},farm,{},stakedValue[i],{apy:stakedValue[i]?sushiPrice.times(SUSHI_PER_BLOCK).times(BLOCKS_PER_YEAR).times(stakedValue[i].poolWeight).div(stakedValue[i].totalWethValue):null});var newFarmRows=_toConsumableArray(farmRows);if(newFarmRows[newFarmRows.length-1].length===3){newFarmRows.push([farmWithStakedValue]);}else{newFarmRows[newFarmRows.length-1].push(farmWithStakedValue);}return newFarmRows;},[[]]);return/*#__PURE__*/React.createElement(StyledCards,null,!!rows[0].length?rows.map(function(farmRow,i){return/*#__PURE__*/React.createElement(StyledRow,{key:i},farmRow.map(function(farm,j){return/*#__PURE__*/React.createElement(React.Fragment,{key:j},/*#__PURE__*/React.createElement(FarmCard,{farm:farm}),(j===0||j===1)&&/*#__PURE__*/React.createElement(StyledSpacer,null));}));}):/*#__PURE__*/React.createElement(StyledLoadingWrapper,null,/*#__PURE__*/React.createElement(Loader,{text:\"Cooking the rice ...\"})));};var FarmCard=function FarmCard(_ref2){var farm=_ref2.farm;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),startTime=_useState2[0],setStartTime=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),harvestable=_useState4[0],setHarvestable=_useState4[1];var _useWallet2=useWallet(),account=_useWallet2.account;var lpTokenAddress=farm.lpTokenAddress;var sushi=useSushi();var renderer=function renderer(countdownProps){var hours=countdownProps.hours,minutes=countdownProps.minutes,seconds=countdownProps.seconds;var paddedSeconds=seconds<10?\"0\".concat(seconds):seconds;var paddedMinutes=minutes<10?\"0\".concat(minutes):minutes;var paddedHours=hours<10?\"0\".concat(hours):hours;return/*#__PURE__*/React.createElement(\"span\",{style:{width:'100%'}},paddedHours,\":\",paddedMinutes,\":\",paddedSeconds);};useEffect(function(){function fetchEarned(){return _fetchEarned.apply(this,arguments);}function _fetchEarned(){_fetchEarned=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var earned;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!sushi){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return getEarned(getMasterChefContract(sushi),lpTokenAddress,account);case 4:earned=_context.sent;setHarvestable(bnToDec(earned));case 6:case\"end\":return _context.stop();}}},_callee);}));return _fetchEarned.apply(this,arguments);}if(sushi&&account){fetchEarned();}},[sushi,lpTokenAddress,account,setHarvestable]);var poolActive=true;// startTime * 1000 - Date.now() <= 0\nreturn/*#__PURE__*/React.createElement(StyledCardWrapper,null,farm.tokenSymbol==='SUSHI'&&/*#__PURE__*/React.createElement(StyledCardAccent,null),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(StyledContent,null,/*#__PURE__*/React.createElement(CardIcon,null,farm.icon),/*#__PURE__*/React.createElement(StyledTitle,null,farm.name),/*#__PURE__*/React.createElement(StyledDetails,null,/*#__PURE__*/React.createElement(StyledDetail,null,\"Deposit \",farm.lpToken.toUpperCase()),/*#__PURE__*/React.createElement(StyledDetail,null,\"Earn \",farm.earnToken.toUpperCase())),/*#__PURE__*/React.createElement(Spacer,null),/*#__PURE__*/React.createElement(Button,{disabled:!poolActive,text:poolActive?'Select':undefined,to:\"/farms/\".concat(farm.id)},!poolActive&&/*#__PURE__*/React.createElement(Countdown,{date:new Date(startTime*1000),renderer:renderer})),/*#__PURE__*/React.createElement(StyledInsight,null,/*#__PURE__*/React.createElement(\"span\",null,\"APY\"),/*#__PURE__*/React.createElement(\"span\",null,farm.apy?\"\".concat(farm.apy.times(new BigNumber(100)).toNumber().toLocaleString('en-US').slice(0,-1),\"%\"):'Loading ...'))))));};var RainbowLight=keyframes(_templateObject());var StyledCardAccent=styled.div(_templateObject2(),RainbowLight);var StyledCards=styled.div(_templateObject3());var StyledLoadingWrapper=styled.div(_templateObject4());var StyledRow=styled.div(_templateObject5(),function(props){return props.theme.spacing[4];});var StyledCardWrapper=styled.div(_templateObject6(),function(props){return props.theme.spacing[4];});var StyledTitle=styled.h4(_templateObject7(),function(props){return props.theme.color.grey[600];},function(props){return props.theme.spacing[2];});var StyledContent=styled.div(_templateObject8());var StyledSpacer=styled.div(_templateObject9(),function(props){return props.theme.spacing[4];},function(props){return props.theme.spacing[4];});var StyledDetails=styled.div(_templateObject10(),function(props){return props.theme.spacing[2];});var StyledDetail=styled.div(_templateObject11(),function(props){return props.theme.color.grey[500];});var StyledInsight=styled.div(_templateObject12());export default FarmCards;","map":null,"metadata":{},"sourceType":"module"}