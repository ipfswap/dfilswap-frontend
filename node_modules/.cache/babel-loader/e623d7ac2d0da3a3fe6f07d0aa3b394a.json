{"ast":null,"code":"import _taggedTemplateLiteral from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _regeneratorRuntime from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _createForOfIteratorHelper from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/home/defi/dfilswap-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  flex: 1;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  @media (max-width: 768px) {\\n    width: 100%;\\n    flex-flow: column nowrap;\\n    align-items: stretch;\\n  }\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  font-family: 'Roboto Mono', monospace;\\n  float: right;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  font-size: 14px;\\n  padding: 8px 20px;\\n  color: \",\";\\n  border-top: solid 1px \",\";\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import BigNumber from'bignumber.js';import React,{useEffect,useState}from'react';import CountUp from'react-countup';import styled from'styled-components';import{useWallet}from'use-wallet';import Card from'../../../components/Card';import CardContent from'../../../components/CardContent';import Label from'../../../components/Label';import Spacer from'../../../components/Spacer';import Value from'../../../components/Value';import SushiIcon from'../../../components/SushiIcon';import useAllEarnings from'../../../hooks/useAllEarnings';import useAllStakedValue from'../../../hooks/useAllStakedValue';import useFarms from'../../../hooks/useFarms';import useTokenBalance from'../../../hooks/useTokenBalance';import useSushi from'../../../hooks/useSushi';import{getSushiAddress,getSushiSupply}from'../../../sushi/utils';import{getBalanceNumber}from'../../../utils/formatBalance';var PendingRewards=function PendingRewards(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),start=_useState2[0],setStart=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),end=_useState4[0],setEnd=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),scale=_useState6[0],setScale=_useState6[1];var allEarnings=useAllEarnings();var sumEarning=0;var _iterator=_createForOfIteratorHelper(allEarnings),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var earning=_step.value;sumEarning+=new BigNumber(earning).div(new BigNumber(10).pow(18)).toNumber();}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _useFarms=useFarms(),_useFarms2=_slicedToArray(_useFarms,1),farms=_useFarms2[0];var allStakedValue=useAllStakedValue();if(allStakedValue&&allStakedValue.length){var sumWeth=farms.reduce(function(c,_ref,i){var id=_ref.id;return c+(allStakedValue[i].totalWethValue.toNumber()||0);},0);}useEffect(function(){setStart(end);setEnd(sumEarning);},[sumEarning]);return/*#__PURE__*/React.createElement(\"span\",{style:{transform:\"scale(\".concat(scale,\")\"),transformOrigin:'right bottom',transition:'transform 0.5s',display:'inline-block'}},/*#__PURE__*/React.createElement(CountUp,{start:start,end:end,decimals:end<0?4:end>1e5?0:3,duration:1,onStart:function onStart(){setScale(1.25);setTimeout(function(){return setScale(1);},600);},separator:\",\"}));};var Balances=function Balances(){var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),totalSupply=_useState8[0],setTotalSupply=_useState8[1];var sushi=useSushi();var sushiBalance=useTokenBalance(getSushiAddress(sushi));var _useWallet=useWallet(),account=_useWallet.account,ethereum=_useWallet.ethereum;useEffect(function(){function fetchTotalSupply(){return _fetchTotalSupply.apply(this,arguments);}function _fetchTotalSupply(){_fetchTotalSupply=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var supply;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getSushiSupply(sushi);case 2:supply=_context.sent;setTotalSupply(supply);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchTotalSupply.apply(this,arguments);}if(sushi){fetchTotalSupply();}},[sushi,setTotalSupply]);return/*#__PURE__*/React.createElement(StyledWrapper,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(StyledBalances,null,/*#__PURE__*/React.createElement(StyledBalance,null,/*#__PURE__*/React.createElement(SushiIcon,null),/*#__PURE__*/React.createElement(Spacer,null),/*#__PURE__*/React.createElement(\"div\",{style:{flex:1}},/*#__PURE__*/React.createElement(Label,{text:\"Your DFIL Balance\"}),/*#__PURE__*/React.createElement(Value,{value:!!account?getBalanceNumber(sushiBalance):'Locked'}))))),/*#__PURE__*/React.createElement(Footnote,null,\"Pending harvest\",/*#__PURE__*/React.createElement(FootnoteValue,null,/*#__PURE__*/React.createElement(PendingRewards,null),\" SUSHI\"))),/*#__PURE__*/React.createElement(Spacer,null),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Label,{text:\"Total DFIL Supply\"}),/*#__PURE__*/React.createElement(Value,{value:totalSupply?getBalanceNumber(totalSupply):'Locked'})),/*#__PURE__*/React.createElement(Footnote,null,\"New rewards per block\",/*#__PURE__*/React.createElement(FootnoteValue,null,\"1,000 DFIL\"))));};var Footnote=styled.div(_templateObject(),function(props){return props.theme.color.grey[400];},function(props){return props.theme.color.grey[300];});var FootnoteValue=styled.div(_templateObject2());var StyledWrapper=styled.div(_templateObject3());var StyledBalances=styled.div(_templateObject4());var StyledBalance=styled.div(_templateObject5());export default Balances;","map":null,"metadata":{},"sourceType":"module"}